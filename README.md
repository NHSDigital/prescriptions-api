# Electronic Prescription Service API

![Build](https://github.com/NHSDigital/prescriptions-api/workflows/Build/badge.svg?branch=main)

This is an API for accessing prescription information.

- `packages/authz/` Deals with authorisation to the API.
- `packages/getMyPrescriptions/` Get prescription details
- `scripts/` Utilities helpful to developers of this specification.

Consumers of the API will find developer documentation on the [NHS Digital Developer Hub](https://digital.nhs.uk/developer/api-catalogue).

## Contributing

Contributions to this project are welcome from anyone, providing that they conform to the [guidelines for contribution](https://github.com/NHSDigital/prescriptions-api/blob/main/CONTRIBUTING.md) and the [community code of conduct](https://github.com/NHSDigital/prescriptions-api/blob/main/CODE_OF_CONDUCT.md).

### Licensing

This code is dual licensed under the MIT license and the OGL (Open Government License). Any new work added to this repository must conform to the conditions of these licenses. In particular this means that this project may not depend on GPL-licensed or AGPL-licensed libraries, as these would violate the terms of those libraries' licenses.

The contents of this repository are protected by Crown Copyright (C).

## Development

It is recommended that you use visual studio code and a devcontainer as this will install all necessary components and correct versions of tools and languages.  
See https://code.visualstudio.com/docs/devcontainers/containers for details on how to set this up on your host machine.  
There is also a workspace file in .vscode that should be opened once you have started the devcontainer. The workspace file can also be opened outside of a devcontainer if you wish.  
The project uses [SAM](https://aws.amazon.com/serverless/sam/) to develop and deploy the APIs

### Pre-commit hooks

Some pre-commit hooks are installed as part of the install above to ensure you can't commit invalid spec changes by accident and to run basic lint checks.  
The pre-commit hook uses python package pre-commit and is configured in the file .pre-commit-config.yaml.  
A combination of these checks are also run in CI.

### Make commands

There are `make` commands that are run as part of the CI pipeline and help alias some functionality during development.

#### install targets

- `install-node` installs node dependencies
- `install-python` installs python dependencies
- `install-hooks` installs git pre commit hooks
- `install` runs all install targes

#### SAM targets

These are used to do common commands

- `sam-build` -- Prepares the lambdas and SAM definiton file to be used in subsequent steps
- `sam-run-local` -- Run the API and lambdas locally
- `sam-sync` -- Sync the API and lambda to AWS

#### Clean and deep-clean targets

The clean target clears up any files that have been generated by building or testing locally.  
The deep-clean target runs clean and also removes any node_modules and python libraries installed locally.

#### Linting and testing

- `lint` runs lint for all code
- `test` runs unit tests for all code

#### Check licenses

- `check-licenses` checks licensces for all packages used
